<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Semantic Bus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <link href='https://fonts.googleapis.com/css?family=Ubuntu|Ubuntu+Mono' rel='stylesheet' type='text/css'>
  <link href='https://cdn.jsdelivr.net/semantic-ui/2.1.8/semantic.min.css' rel='stylesheet' type='text/css'>
  <link href='./css/flex.css' rel='stylesheet' type='text/css'>
  <link href='./css/main.css' rel='stylesheet' type='text/css'>
  <link href='./js/jsonEditor/dist/jsoneditor.min.css' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="./js/awesomplete-gh-pages/awesomplete.css" />
</head>

<body>
  <navigation></navigation>
  <!--<script src="https://cdn.jsdelivr.net/riot/2.6.2/riot+compiler.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/riot/2.6.2/riot+compiler.js"></script>-->
  <script src="https://cdn.jsdelivr.net/npm/riot@3.7.0/riot+compiler.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/javascript-detect-element-resize/0.5.3/detect-element-resize.js"></script>


  <script src="./js/jsonEditor/dist/jsoneditor.min.js"></script>
  <script src="./js/sift/sift.min.js"></script>
  <script src="./js/jszip/dist/jszip.js"></script>
  <script src="./js/awesomplete-gh-pages/awesomplete.min.js"></script>
  <script lang="javascript" src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.10.5/xlsx.min.js"></script>
  <script src="./js/spin.min.js"></script>
  <script src="./js/RiotControl/riotcontrol.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>

  <script src="./store/workspaceBusiness.js"></script>
  <script src="./store/workspaceStore.js"></script>
  <script src="./store/technicalComponentStore.js"></script>
  <script src="./store/genericStore.js"></script>
  <script src="./store/cacheNosqlStore.js"></script>
  <script src="./store/uploadFileStore.js"></script>
  <script src="./store/profilStore.js"></script>
  <script src="./store/mainController.js"></script>
  <script src="./store/sqlStore.js"></script>

  <script type="riot/tag" src="tag/zenTable.tag"></script>
  <script type="riot/tag" src="tag/navigation.tag"></script>
  <script type="riot/tag" src="tag/workspaceTable.tag"></script>
  <script type="riot/tag" src="tag/workspaceEditor.tag"></script>
  <script type="riot/tag" src="tag/technicalComponentTable.tag"></script>
  <script type="riot/tag" src="tag/admin.tag"></script>
  <script type="riot/tag" src="tag/jsonEditor.tag"></script>
  <script type="riot/tag" src="tag/user-list.tag"></script>
  <script type="riot/tag" src="tag/login.tag"></script>
  <script type="riot/tag" src="tag/profil.tag"></script>
  <script type="riot/tag" src="tag/landing.tag"></script>
  <script type="riot/tag" src="tag/graph.tag"></script>

  <script type="riot/tag" src="tag/jsonPreviewer.tag"></script>
  <script type="riot/tag" src="tag/no-editor.tag"></script>
  <script type="riot/tag" src="tag/scrapper-editor.tag"></script><!--WARNING exception when riot mount-->
  <script type="riot/tag" src="tag/rest-get-json-editor.tag"></script>
  <script type="riot/tag" src="tag/rest-get-editor.tag"></script>
  <script type="riot/tag" src="tag/workspace-share-table.tag"></script>
  <script type="riot/tag" src="tag/object-transformer.tag"></script>
  <script type="riot/tag" src="tag/google-get-json-editor.tag"></script>
  <script type="riot/tag" src="tag/simple-agregator-editor.tag"></script>
  <script type="riot/tag" src="tag/google-geolocaliser-editor.tag"></script>
  <script type="riot/tag" src="tag/cache-nosql-editor.tag"></script>
  <script type="riot/tag" src="tag/data-gouv-inverse-geolocaliser-editor.tag"></script>
  <script type="riot/tag" src="tag/rest-api-get-editor.tag"></script>
  <script type="riot/tag" src="tag/xml-property-to-object-editor.tag"></script>
  <script type="riot/tag" src="tag/framacalc-get-csv-editor.tag"></script>
  <script type="riot/tag" src="tag/data-gouv-geolocaliser-editor.tag"></script>
  <script type="riot/tag" src="tag/jsonTransformer.tag"></script>
  <script type="riot/tag" src="tag/data-gouv-geolocaliser-mass-editor.tag"></script>
  <script type="riot/tag" src="tag/join-by-field-editor.tag"></script>
  <script type="riot/tag" src="tag/deeper-focus-opening-bracket-editor.tag"></script>
  <script type="riot/tag" src="tag/sparql-request-editor.tag"></script>
  <script type="riot/tag" src="tag/filter-editor.tag"></script>
  <script type="riot/tag" src="tag/upload-editor.tag"></script>
  <script type="riot/tag" src="tag/sql-connecteur-editor.tag"></script>
  <script type="riot/tag" src="tag/mongo-connecteur-editor.tag"></script>
  <script type="riot/tag" src="tag/value-mapping-editor.tag"></script>
  <script type="riot/tag" src="tag/workspace-component-editor.tag"></script>
  <script type="riot/tag" src="tag/graph_of_use.tag"></script>
  <script type="riot/tag" src="tag/graph_of_use_workspace.tag"></script>
  <script type="riot/tag" src="tag/json-to-yaml.tag"></script>



  <script>
    var worspaceStore = new WorkspaceStore(); // Create a store instance.
    var profilStore = new profilStore();
    RiotControl.addStore(worspaceStore); // Register the store in central dispatch.
    RiotControl.addStore(profilStore);
    var technicalComponentStore = new TechnicalComponentStore();
    RiotControl.addStore(technicalComponentStore);
    var specificStoreList = [];
    specificStoreList.push(new CacheNosqlStore());
    specificStoreList.push(new UploadStore());
    specificStoreList.push(new sqlStore());
    for (specificStore of specificStoreList) {
      RiotControl.addStore(specificStore);
    }
    var genericStore = new GenericStore(specificStoreList);
    RiotControl.addStore(genericStore);
    var mainController = new MainController(worspaceStore, genericStore, profilStore);
    RiotControl.addStore(mainController);
    RiotControl.on('login_redirect', function() {
      window.open("../auth/login.html", "_self");
    })
    console.log(window.location.href)
    RiotControl.trigger('https_force?')
    riot.compile(function() {
      // here tags are compiled and riot.mount works synchronously
      var tags = riot.mount('*');
      /*RiotControl.on('previewJSON',function(message){
        tags[2].data=message.data;
      }.bind(this));*/

    });
  </script>
</body>

</html>
